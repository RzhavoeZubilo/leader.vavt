define(["jquery","core/modal_factory","core/str","core/modal_events","core/templates","core/ajax"],function(i,a,o,s,r,e){return{init:function(){var c=i("[data-key=icon_picker]"),t=o.get_string("iconselection","local_vxg_menus");fetchMap=e.call([{methodname:"core_output_load_fontawesome_icon_map",args:[]}],!0,!1)[0],fetchMap.then(function(o){var e=[],n=[];o.forEach(function(o){-1===n.indexOf(o.to)&&r.renderPix(o.pix,o.component,o.component+"/"+o.pix).then(function(o){e.push(o)}),n.push(o.to)}),a.create({title:t,body:r.render("local_vxg_menus/icon_picker_modal",{icons:e}),type:"SAVE_CANCEL"},c).then(function(o){o.setLarge(),o.attachToDOM(),i(".modal-body").find(".icon").on("click",function(){i(".choosed-icon").removeClass("choosed-icon"),i(this).addClass("choosed-icon")}),o.getRoot().on(s.save,function(o){var e=i(".choosed-icon").attr("title"),n=i(".choosed-icon").clone();i(".selected_icon").replaceWith(n),n.addClass("selected_icon"),n.removeClass("choosed-icon"),i('[name="icon"]').val(e)})})})}}});